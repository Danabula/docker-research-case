---
title: What zijn containers
order: 1
active: 1
goto:
 type: subject
 index: 5
---

# Wat zijn containers?
## Docker onder de motorkap

Containers zijn een mannier van virtualizatie op het operating systeem level.
Deze virtualizatie technologieen worden ookwel containerizatie genoemd.
Docker engine

**ECOSYSTEM OVERVIEW IMAGE**
docker uses runc, libvirt ..

*TODO*
systemd-nspawn, lxc, libvirt
runc (libcontainer) <- docker
podman
kubernetes
oci standards

##
*TODO* geschiedenis van docker zelf
*TODO* tijdlijn
Geschiedenis waarom zo?
docker creatie
lxc -> libcontainer -> runc
docker splitsing
oci oprichting voor standards

## Oci image structuur

De oci container image specificatie heeft een platform nodig met cpu architectuur & os, dus containers zijn niet cross platform  
[oci image spec](https://github.com/opencontainers/image-spec/blob/main/spec.md)  
[oci image spec image index](https://github.com/opencontainers/image-spec/blob/main/image-index.md)


## Container runtime, Runc
[runc](https://github.com/opencontainers/runc) is een implementatie van de runtime spec abstractielaag over meerdere linux *technologieeen*, zoals cgroups en namespaces
refer to linux features below


---
## Wat is een kernel & linux

Een kernel is een stuk software dat dient als de kern van een operating systeem.
Het doel is om een abstractie te geven over verschillende hardware componenten en het verdelen van deze hardware resources naar applicaties, zodat het operating systeem op verschillende hardware kan draaien & daar niet mee bezig hoeft te zijn.
Een populaire kernel is de linux kernel, veel servers gebruiken een operating systeem die linux als kernel gebruikt, zoals debian (een linux distrobutie / distro).

Een functie die de linux kernel bied is namespacing.  
Deze namespacing wordt gebruikt om programmas te isoleren, door alleen toegang tot resources in dezelfde namespace toe te staan.  
Bijvoorbeeld een programma in een bepaalde pid (process id) namespace ziet alleen maar programmas in dezelfde pid namespace en  
weet niet van het bestaan van andere programmas in andere namespaces.  
Een manier om naar linux namespaces te kijken, is om elke namespaces als een soort eigen geisoleerde wereld te zien.
Deze technologie is waar runc en andere container technologieeen op bouwen.  
Andere linux kernel componenten met namespacing zijn netwerken en filesysteemen.
Een andere functionaliteit die linux heeft is cgroups,  
waarbij je programmas toegang tot hardware resources kan limiteren,  
zoals bijvoorbeeld cpu tijd of io snelheid.

[Lxc](https://github.com/lxc/lxc), linux containers is een stuk software om een geisoleerde wereld te creeen voor programmas,  
door gebruik te maken van de verschillende kernel functionaliteit zoals namespaces en cgroups.


---
## Docker op windows

Docker is niet platform onafhankelijk, dus om op een platform te draaien  
die niet alle functionaliteit biedt voor runc (en dus docker) heb je een virtuele machine nodig.  
Windows heeft daar een oplossing voor genaamd wsl, het windows subsystem for linux.  
Dat is dus eigenlijk een virtuele machine met extra integratie en configuratie.  
Dit is handig voor development, want dan lijkt je development opstelling zo veel mogelijk op die van de productie server,  
want server applicaties draaien in productie vrijwel altijd op linux (debian, ubuntu).
- Er is wel een specifiek probleem met wsl, door de interop met de windows en linux filesystemen
    is er nog geen oplossing voor cachen bedacht, als dat mogelijk blijkt.  
    Dit betekent dat io van de linux vm naar de windows host filesysteem en andersom erg langzaam is, vooral bij heel veel kleine files.  
    Dus als je php, node of andere talen/frameworks gebruikt met heel veel kleine files moet je
    die files in de vm installeren op de vms eigen partitie, anders is het erg langzaam.

https://github.com/microsoft/WSL/issues/4197#issuecomment-604592340
